# Why You Got Protocol 10 Instead of Protocol 12

## Your Brain Map

According to your brain map image:
- **Eyes Open Protocols: Index 4 and 18**
- **Eyes Closed Protocols: Index 8 and 12**

## What Happened

You selected **ANXIETY** and the system extracted **Index 18** from the PDF.

### Index 18 + ANXIETY = Protocol 10

```
ANXIETY + Index 18 → Protocol 10 (1Hz, 1 cycle)
  Step 1: FRONT - 1Hz, 40%, 4min
  Step 2: BACK - 1Hz, 40%, 4min
  Step 3: FRONT - 1Hz, 50%, 2min
  Step 4: BACK - 1Hz, 50%, 2min
```

**Result:** Only FRONT and BACK quadrants ✗

## What You COULD Get

### Index 4 + ANXIETY = Protocol 12

If the system had extracted **Index 4** instead:

```
ANXIETY + Index 4 → Protocol 12 (1Hz, 1 cycle)
  Step 1: ALL - 1Hz, 40%, 4min ✓
  Step 2: FRONT - 1Hz, 50%, 2min
  Step 3: RIGHT AND LEFT - 1Hz, 50%, 4min ✓
  Step 4: BACK - 1Hz, 50%, 2min
```

**Result:** Has ALL and RIGHT AND LEFT quadrants! ✓✓✓

## Or Try Eyes Closed Protocols

### Index 8 + ANXIETY = Protocol 12

```
ANXIETY + Index 8 → Protocol 12 (1Hz, 1 cycle)
  Step 1: ALL - 1Hz, 40%, 4min ✓
  Step 2: FRONT - 1Hz, 50%, 2min
  Step 3: RIGHT AND LEFT - 1Hz, 50%, 4min ✓
  Step 4: BACK - 1Hz, 50%, 2min
```

**Result:** Same as Index 4 - has ALL and RIGHT AND LEFT! ✓✓✓

### Index 12 + ANXIETY = Protocol 10

```
ANXIETY + Index 12 → Protocol 10
```

**Result:** Only FRONT and BACK ✗

## Why OpenAI Extracted Index 18

The OpenAI extraction reads the "Eyes Open Brain Map" section and picks one protocol number. Your brain map lists **both 4 and 18**, but the AI selected 18.

## Complete Routing for ANXIETY Condition

| Index | Protocol | Has ALL? | Has RIGHT AND LEFT? |
|-------|----------|----------|-------------------|
| 1, 2, 7, 9, 15, 22, 24 | Protocol 11 | ✓ | ✗ |
| **4, 8, 11, 14, 16, 23** | **Protocol 12** | **✓** | **✓** |
| 3, 5, 6, 10, 12, 13, 17, **18**, 19, 20, 21 | Protocol 10 | ✗ | ✗ |

Your brain map has:
- **Index 4** → Would give Protocol 12 (ALL + RIGHT AND LEFT) ✓
- **Index 18** → Gives Protocol 10 (only FRONT/BACK) ✗ ← **You got this one**
- **Index 8** → Would give Protocol 12 (ALL + RIGHT AND LEFT) ✓
- **Index 12** → Gives Protocol 10 (only FRONT/BACK) ✗

## Solutions

### Option 1: Update the OpenAI Prompt
Modify the extraction to prefer lower-numbered indices or extract all indices and let the provider choose.

### Option 2: Manual Override
After the AI extracts the protocol, allow the provider to select which protocol number from the brain map to use (4, 8, 12, or 18).

### Option 3: Smart Selection Logic
Program the system to:
1. Extract all protocol indices from the brain map (4, 8, 12, 18)
2. Check which ones would give protocols with ALL/RIGHT AND LEFT quadrants
3. Prefer those over FRONT/BACK only protocols
4. For your case: Prefer indices 4 or 8 over 18 or 12

## Immediate Test

To see Protocol 12 with ALL and RIGHT AND LEFT quadrants right now:

1. You'd need a brain map where the OpenAI extraction picks Index 4, 8, 11, 14, 16, or 23 for ANXIETY
2. Or manually specify Index 4 from your current brain map
3. Or try the Eyes Closed section and hope it picks Index 8 instead of 12

## Why This Matters

Your question "Can we make sure that when the protocols are assigned they are in order as the QUADRANT(S) lists it to be" was actually about seeing ALL the quadrant types, not just FRONT/BACK.

**The protocols ARE in the correct order** - Protocol 10 is correctly showing steps 1-4 in order. The issue is that **Protocol 10 itself doesn't have ALL or RIGHT AND LEFT quadrants by design**.

You need the system to extract/select **Index 4 or 8** instead of **Index 18** to get Protocol 12, which DOES have all the quadrant types.

